<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.com.sign.mapper.SignMapper">
    
    <!-- 결재자 목록 조회 -->
    <select id="signerSelectAll" parameterType="signDTO" resultType="signDTO">
		SELECT *
		FROM (
		SELECT T0.*, ROWNUM RNUM
		FROM (
		    
		select mber_id,			--회원코드
			   mber_nm,			--회원명
			   mbtlnum,			--전화번호
			   dept_cd, 		--부서코드
			   resp_cd,			--직책코드
			   grade_cd,			--직급코드
			   fn_get_deptnm(mber_id) as dept_nm,
               FN_GET_GRADENM(grade_cd) as gradeNm
		from COMTNGNRLMBER
		where dept_cd = #{deptCd}
		
		) T0
		)
		WHERE RNUM BETWEEN #{firstIndex} + 1 AND #{firstIndex} + #{recordCountPerPage}
    </select>
    <!-- 결재자 목록 카운트 -->
    <select id="signerSelectCnt" parameterType="signDTO" resultType="Integer">
		select count(mber_id) as cnt
		from COMTNGNRLMBER
		where dept_cd = #{deptCd}
    </select>
    
    
</mapper>